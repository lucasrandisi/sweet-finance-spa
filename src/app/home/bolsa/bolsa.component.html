<div class="container-body">
    
    <div class="grid grid-cols-4">
        <div class="container-list">
            <span class="font-normal text-3xl">Favoritos</span>

            <div class="container-table">
                <div class="table-fixed text-center table">
                    <thead>
                        <tr>
                            <th class="font-bold text-base">Ticker</th>
                            <th class="font-bold text-base">Cambio</th>
                            <th class="font-bold text-base">Precio</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let fav of favorites">
                            <td (click)="find_ticker_form(fav.ticker)">{{fav.ticker}}</td>
                            <td>{{fav.change}}</td>
                            <td>{{fav.price}}</td>
                            <button mat-icon-button (click)="delete_favorite(fav.id)"><mat-icon class="delete-button">clear</mat-icon></button>
                        </tr>
                    </tbody>
                </div>
            </div>
        </div>

        <div class="col-span-3">
            <div class="container-find">
                <form [formGroup]="form" (ngSubmit)="find_ticker()">
                    <mat-form-field appearance="legacy">
                        <mat-label>Ticker</mat-label>
                        <input id="ticker" formControlName="ticker" autocomplete="false" matInput>
                    </mat-form-field>
                    <button mat-raised-button type="submit" class="form-button">Buscar</button>
                    <button [disabled]="!fav_flag" type="button" mat-raised-button (click)="add_favorite()" class="form-button">Añadir a Favoritos</button>
                </form>


                <!--pasar a un componente diferentes los gráficos-->

                <div class="table-fixed text-center">
                    <thead>
                        <tr>
                            <th class="w-1/6">Ticker</th>
                            <th class="w-1/4">Compañía</th>
                            <th class="w-1/6">Mercado de EEUU</th>
                            <th class="w-1/6">Última cotización</th>
                            <th class="w-1/8">EMA21 Diaria</th>
                            <th class="w-1/8">EMA200 Diaria</th>
                            <th class="w-1/8">RSI Diario</th>
                            <th class="w-1/6">Estado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>{{symbol}}</td>
                            <td>{{name}}</td>
                            <td>{{mercado}}</td>
                            <td>{{price}}</td>
                            <td>{{ema21}}</td>
                            <td>{{ema200}}</td>
                            <td>{{rsi}}</td>
                            <td *ngIf="estado_compra" class="compra">COMPRA</td>
                            <td *ngIf="estado_venta" class="venta">VENTA</td>
                        </tr>
                    </tbody>
                </div>
            </div>

            <div class="chart-box">
                <div *ngIf="flag_candle" id="chart-candlestick">
                    <apx-chart
                        #chartCandle
                        [series]="chartCandleOptions.series"
                        [chart]="chartCandleOptions.chart"
                        [xaxis]="chartCandleOptions.xaxis"
                        [yaxis]="chartCandleOptions.yaxis"
                        [plotOptions]="chartCandleOptions.plotOptions"
                        [title]="chartCandleOptions.title"     
                        [legend]="chartCandleOptions.legend"
                        [stroke]="chartCandleOptions.stroke"
                        [tooltip]="chartCandleOptions.tooltip"
                    ></apx-chart>
                </div>
                <div *ngIf="flag_vol" id="chart-bar">
                    <apx-chart
                        #chartBar
                        [series]="chartBarOptions.series"
                        [chart]="chartBarOptions.chart"
                        [xaxis]="chartBarOptions.xaxis"
                        [yaxis]="chartBarOptions.yaxis"
                        [dataLabels]="chartBarOptions.dataLabels"
                        [stroke]="chartBarOptions.stroke"
                        [plotOptions]="chartBarOptions.plotOptions"
                        [title]="chartBarOptions.title"
                    ></apx-chart>
                </div>
                <div *ngIf="flag_macd" id="chart-macd">
                    <apx-chart
                        #chartMACD
                        [series]="chartMACDOptions.series"
                        [chart]="chartMACDOptions.chart"
                        [markers]="chartMACDOptions.markers"
                        [xaxis]="chartMACDOptions.xaxis"
                        [yaxis]="chartMACDOptions.yaxis"
                        [stroke]="chartMACDOptions.stroke"
                        [plotOptions]="chartMACDOptions.plotOptions"
                        [legend]="chartMACDOptions.legend"
                        [title]="chartMACDOptions.title"
                    ></apx-chart>
                </div>
                <div *ngIf="flag_rsi" id="chart-rsi">
                    <apx-chart
                        #chartRSI
                        [series]="chartRSIOptions.series"
                        [chart]="chartRSIOptions.chart"
                        [markers]="chartRSIOptions.markers"
                        [xaxis]="chartRSIOptions.xaxis"
                        [yaxis]="chartRSIOptions.yaxis"
                        [stroke]="chartRSIOptions.stroke"
                        [annotations]="chartRSIOptions.annotations"
                        [title]="chartRSIOptions.title"
                        ></apx-chart>
                </div>
            </div>
        </div>
    </div>


</div>
